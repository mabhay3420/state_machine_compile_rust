1. Test with multiple state machines and verify the output.
2. Read up about llvm, its rust bindings and try to generate the code in llvm IR.